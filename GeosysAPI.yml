openapi: 3.0.1
info:
  title: geosys-api
  version: '1.0'
  contact:
    name: Geobase
  description: "API permettant d'interagir avec GeoSys."
servers:
  - url: 'http://localhost:8080/geosys-api/v1'
paths:
  /system/buckets:
    post:
      summary: ''
      responses:
        '201':
          description: Created
      parameters:
        - schema:
            type: string
          in: query
          name: bucket_url
          required: true
          description: Bucket URL
      tags:
        - system
      operationId: post-system-buckets
      description: Create a bucket for storage.
    delete:
      summary: ''
      responses:
        '204':
          description: No Content
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                title: ReturnValue-BasicErrorMessage
                type: object
                properties:
                  code:
                    type: string
                  message:
                    type: string
      parameters:
        - schema:
            type: string
          in: query
          name: bucket_url
          required: true
          description: Bucket URL
      description: Delete a storage bucket.
      operationId: delete-system-buckets
      tags:
        - system
    parameters: []
  /system/files:
    post:
      summary: ''
      responses:
        '201':
          description: Created
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                title: ReturnValue-BasicErrorMessage
                type: object
                properties:
                  code:
                    type: string
                  message:
                    type: string
      requestBody:
        content:
          application/octet-stream:
            schema:
              type: string
              format: binary
      description: Upload a file
      operationId: post-system-files
      parameters:
        - schema:
            type: string
          in: query
          name: file_url
          required: true
          description: Full file path
      tags:
        - system
    get:
      summary: ''
      responses:
        '200':
          description: OK
          content:
            application/octet-stream:
              schema:
                type: string
                format: binary
                description: Downloaded file as a stream of octet.
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                title: ReturnValue-BasicErrorMessage
                type: object
                properties:
                  code:
                    type: string
                  message:
                    type: string
      parameters:
        - schema:
            type: string
          in: query
          name: file_url
          required: true
          description: Full file path
      description: Retrieve a file.
      operationId: get-system-files
      tags:
        - system
    delete:
      summary: ''
      responses:
        '204':
          description: No Content
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                title: ReturnValue-BasicErrorMessage
                type: object
                properties:
                  code:
                    type: string
                  message:
                    type: string
      parameters:
        - schema:
            type: string
          in: query
          name: file_url
          required: true
          description: Full file path
      description: Delete a file.
      operationId: delete-system-files
      tags:
        - system
    parameters: []
  /user/login:
    get:
      summary: ''
      tags:
        - user
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  access_token:
                    type: string
                    description: JWT access token string.
                  token_type:
                    type: string
                    description: Token type.
                  expires_in:
                    type: integer
                    description: Token Lifetime in seconds.
                  scope:
                    type: string
                    description: Actions allowed by the token.
              examples:
                exTokenReturn:
                  value:
                    access_token: eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpYXQiOjE1NzUzMDkxMzAsIm5iZiI6MTU3NTMwOTEzMSwiZXhwIjoxNTc1MzA5MTM1LCJpc3MiOiJOUkNhbiIsInNjb3BlIjoiZ2Vvc3lzOmFkbWluIGdlb3N5czp3cml0ZSBnZW9zeXM6cmVhZCJ9.eFCT0wxG06A7cWmXmLbP5__v-awiYAL_UFrqwVNbdkY
                    token_type: Bearer
                    expired_in: 3600
                    scope: 'read:geosys write:geosys'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                title: ReturnValue-BasicErrorMessage
                type: object
                properties:
                  code:
                    type: string
                  message:
                    type: string
      parameters:
        - schema:
            type: string
          in: header
          name: username
          required: true
        - schema:
            type: string
          in: header
          name: password
          required: true
          description: ''
        - schema:
            type: integer
            default: '3600'
          in: header
          name: token_lifetime
          description: Token lifetime in seconds.
      operationId: get-user-login
      description: Validate a user and get a token.
  /system/resource:
    post:
      summary: ''
      responses:
        '200':
          description: OK
          content:
            '*/*':
              schema:
                type: object
              examples:
                exGetResource:
                  value:
                    value: resource_01
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                title: ReturnValue-BasicErrorMessage
                type: object
                properties:
                  code:
                    type: string
                  message:
                    type: string
      description: Returns a parameter value from one or many resource files.
      operationId: post-system-resource
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                files:
                  type: array
                  description: List of resource files URLs to search through.
                  items:
                    type: string
                search_path:
                  type: array
                  description: Search path for accessing the parameter value.
                  items:
                    type: string
            examples:
              exResourcesBodyRequest:
                value:
                  files:
                    - 's3://geosys/ressources/commun/cccot.xml'
                    - 's3://geosys/ressources/rhn/rhn-chyf.json'
                  search_path:
                    - pro
                    - application
                    - cits_python
        description: To find a parameter value one must give a resource file URL list and a search path.
      tags:
        - system
  /prod-tracking/codes:
    get:
      summary: ''
      tags:
        - prod-tracking
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  title: ProdTracking-Code
                  type: object
                  properties:
                    id:
                      type: integer
                    id_liste_code:
                      type: integer
                    nom:
                      type: string
                    desc_en:
                      type: string
                    desc_fr:
                      type: string
      parameters:
        - schema:
            type: string
            enum:
              - SPATIAL_REPRES_TYPE_PNA
              - STATUT_LOT_CL
              - STATUT_ETAPE_CL
              - STATUT_CONTRACTANT_CL
              - THEME_CL
              - TYPE_TRAVAIL_CL
              - NOM_ETAPE_CL
              - CLASSE_ENTITE_CL
          in: query
          name: category
        - schema:
            type: string
          in: query
          name: nom
        - schema:
            type: integer
          in: query
          name: id
        - schema:
            type: integer
          in: query
          name: id_list_codes
      operationId: get-prod-tracking-codes
      description: Get records from suivi_prod.code table.
  /prod-tracking/codelist:
    get:
      summary: ''
      tags:
        - prod-tracking
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  title: ProdTracking-CodeList
                  type: object
                  properties:
                    id:
                      type: integer
                    nom:
                      type: string
                    desc_en:
                      type: string
                    desc_fr:
                      type: string
      description: Get records from suivi_prod.list_codes table.
      operationId: get-prod-tracking-codelist
      parameters:
        - schema:
            type: integer
          in: query
          name: id
        - schema:
            type: string
          in: query
          name: nom
  '/prod-tracking/work-area/{id}':
    get:
      summary: ''
      tags:
        - prod-tracking
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                oneOf:
                  - title: ProdTracking-UniteTravail2-NoRel
                    type: object
                    properties:
                      etampe:
                        type: string
                      dt_c:
                        type: string
                      dt_m:
                        type: string
                      id:
                        type: string
                      id_lot:
                        type: string
                      date_prevue_fin:
                        type: string
                      date_debut_fin:
                        type: string
                      where_clause:
                        type: string
                      geom:
                        type: string
                  - title: ProdTracking-Unitetravail2-FullRel
                    type: object
                    properties:
                      unite_travail_2:
                        title: ProdTracking-UniteTravail2-NoRel
                        type: object
                        properties:
                          etampe:
                            type: string
                          dt_c:
                            type: string
                          dt_m:
                            type: string
                          id:
                            type: string
                          id_lot:
                            type: string
                          date_prevue_fin:
                            type: string
                          date_debut_fin:
                            type: string
                          where_clause:
                            type: string
                          geom:
                            type: string
                      etape_ut:
                        type: array
                        items:
                          title: ProdTracking-EtapeUT
                          type: object
                          properties:
                            etampe:
                              type: string
                            dt_c:
                              type: string
                            dt_m:
                              type: string
                            id:
                              type: string
                            id_unite_travail:
                              type: string
                            nom_etape_cl:
                              type: integer
                            description:
                              type: string
                            operateur:
                              type: string
                            date_debut:
                              type: string
                            date_fin:
                              type: string
                            statut_etape_cl:
                              type: integer
                      sous_unite_travail:
                        type: array
                        items:
                          title: ProdTracking-SousUniteTravail-FullRel
                          type: object
                          properties:
                            sous_unite_travail:
                              title: ProdTracking-SousUnitetravail-NoRel
                              type: object
                              properties:
                                etampe:
                                  type: string
                                dt_c:
                                  type: string
                                dt_m:
                                  type: string
                                id:
                                  type: string
                                id_unite_travail:
                                  type: string
                                date_prevue_fin:
                                  type: string
                                date_debut:
                                  type: string
                                date_fin:
                                  type: string
                            etape_sut:
                              type: array
                              items:
                                title: ProdTracking-EtapeUT
                                type: object
                                properties:
                                  etampe:
                                    type: string
                                  dt_c:
                                    type: string
                                  dt_m:
                                    type: string
                                  id:
                                    type: string
                                  id_unite_travail:
                                    type: string
                                  nom_etape_cl:
                                    type: integer
                                  description:
                                    type: string
                                  operateur:
                                    type: string
                                  date_debut:
                                    type: string
                                  date_fin:
                                    type: string
                                  statut_etape_cl:
                                    type: integer
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                title: ReturnValue-BasicErrorMessage
                type: object
                properties:
                  code:
                    type: string
                  message:
                    type: string
      parameters:
        - schema:
            type: boolean
            enum:
              - 'True'
              - 'False'
            default: 'False'
          in: query
          name: full_relation
      operationId: get-prod-tracking-work-area-id
      description: Retreive work area record. By using the parameter full_relation=False you can retreive only the work area record or by using full_relation=True you can retreive the work area and all its dependencies (related table records).
    parameters:
      - schema:
          type: string
        name: id
        in: path
        description: Work area id
        required: true
    delete:
      summary: ''
      responses:
        '204':
          description: No Content
      operationId: delete-prod-tracking-work-area-id
      tags:
        - prod-tracking
      description: Delete a record in table unite_travail_2.
    put:
      summary: ''
      operationId: put-prod-tracking-work-area-id
      responses:
        '202':
          description: Accepted
      description: Update a record in unite_travail_2 table.
      tags:
        - prod-tracking
      requestBody:
        content:
          application/json:
            schema:
              title: ProdTracking-UniteTravail2-NoRel
              type: object
              properties:
                etampe:
                  type: string
                dt_c:
                  type: string
                dt_m:
                  type: string
                id:
                  type: string
                id_lot:
                  type: string
                date_prevue_fin:
                  type: string
                date_debut_fin:
                  type: string
                where_clause:
                  type: string
                geom:
                  type: string
        description: Only not null attributes in the JSON body will get updated. The id must not be empty.
  /prod-tracking/work-area:
    post:
      summary: ''
      responses:
        '200':
          description: OK
      description: Insert a new record in unite_travail_2
      operationId: post-prod-tracking-work-area
      requestBody:
        content:
          application/json:
            schema:
              title: ProdTracking-UniteTravail2-NoRel
              type: object
              properties:
                etampe:
                  type: string
                dt_c:
                  type: string
                dt_m:
                  type: string
                id:
                  type: string
                id_lot:
                  type: string
                date_prevue_fin:
                  type: string
                date_debut_fin:
                  type: string
                where_clause:
                  type: string
                geom:
                  type: string
      tags:
        - prod-tracking
    parameters: []
  '/prod-tracking/featuretype/{id}':
    get:
      summary: Your GET endpoint
      tags:
        - prod-tracking
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  title: ProdTracking-Featuretype
                  type: object
                  properties:
                    etampe:
                      type: string
                    dt_c:
                      type: string
                    dt_m:
                      type: string
                    id:
                      type: string
                    local_name:
                      type: string
                    spatial_repres_type_pna:
                      type: integer
      operationId: get-prod-tracking-featuretype-id
      description: Retreive a record from feature)type table.
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
        description: ID from lot table
    delete:
      summary: ''
      operationId: delete-prod-tracking-featuretype-id
      responses:
        '204':
          description: No Content
      description: Delete one record from feature_type table.
      tags:
        - prod-tracking
  /prod-tracking/featuretype:
    post:
      summary: ''
      operationId: post-prod-tracking-featuretype
      responses:
        '201':
          description: Created
      description: Insert feature class inside feature_type table.
      requestBody:
        content:
          application/json:
            schema:
              type: array
              items:
                title: ProdTracking-Featuretype
                type: object
                properties:
                  etampe:
                    type: string
                  dt_c:
                    type: string
                  dt_m:
                    type: string
                  id:
                    type: string
                  local_name:
                    type: string
                  spatial_repres_type_pna:
                    type: integer
        description: ''
      tags:
        - prod-tracking
  '/prod-tracking/lot/{id}':
    get:
      summary: ''
      tags:
        - prod-tracking
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                oneOf:
                  - title: ProdTracking-Lot-NoRel
                    type: object
                    properties:
                      etampe:
                        type: string
                      dt_c:
                        type: string
                      dt_m:
                        type: string
                      id:
                        type: string
                      operateur:
                        type: string
                      date_debut:
                        type: string
                      date_fin:
                        type: string
                      theme_cl:
                        type: integer
                      type_travail_cl:
                        type: integer
                      statut_lot_cl:
                        type: integer
                  - title: ProdTracking-Lot-FullRel
                    type: object
                    properties:
                      lot:
                        title: ProdTracking-Lot-NoRel
                        type: object
                        properties:
                          etampe:
                            type: string
                          dt_c:
                            type: string
                          dt_m:
                            type: string
                          id:
                            type: string
                          operateur:
                            type: string
                          date_debut:
                            type: string
                          date_fin:
                            type: string
                          theme_cl:
                            type: integer
                          type_travail_cl:
                            type: integer
                          statut_lot_cl:
                            type: integer
                      executant:
                        title: ProdTracking-Executant
                        type: object
                        properties:
                          etampe:
                            type: string
                          dt_c:
                            type: string
                          dt_m:
                            type: string
                          id:
                            type: string
                          id_contractant:
                            type: string
                          no_contrat:
                            type: string
                          prix_contrat:
                            type: number
                      unite_travail_2:
                        type: array
                        items:
                          title: ProdTracking-Unitetravail2-FullRel
                          type: object
                          properties:
                            unite_travail_2:
                              title: ProdTracking-UniteTravail2-NoRel
                              type: object
                              properties:
                                etampe:
                                  type: string
                                dt_c:
                                  type: string
                                dt_m:
                                  type: string
                                id:
                                  type: string
                                id_lot:
                                  type: string
                                date_prevue_fin:
                                  type: string
                                date_debut_fin:
                                  type: string
                                where_clause:
                                  type: string
                                geom:
                                  type: string
                            etape_ut:
                              type: array
                              items:
                                title: ProdTracking-EtapeUT
                                type: object
                                properties:
                                  etampe:
                                    type: string
                                  dt_c:
                                    type: string
                                  dt_m:
                                    type: string
                                  id:
                                    type: string
                                  id_unite_travail:
                                    type: string
                                  nom_etape_cl:
                                    type: integer
                                  description:
                                    type: string
                                  operateur:
                                    type: string
                                  date_debut:
                                    type: string
                                  date_fin:
                                    type: string
                                  statut_etape_cl:
                                    type: integer
                            sous_unite_travail:
                              type: array
                              items:
                                title: ProdTracking-SousUniteTravail-FullRel
                                type: object
                                properties:
                                  sous_unite_travail:
                                    title: ProdTracking-SousUnitetravail-NoRel
                                    type: object
                                    properties:
                                      etampe:
                                        type: string
                                      dt_c:
                                        type: string
                                      dt_m:
                                        type: string
                                      id:
                                        type: string
                                      id_unite_travail:
                                        type: string
                                      date_prevue_fin:
                                        type: string
                                      date_debut:
                                        type: string
                                      date_fin:
                                        type: string
                                  etape_sut:
                                    type: array
                                    items:
                                      title: ProdTracking-EtapeUT
                                      type: object
                                      properties:
                                        etampe:
                                          type: string
                                        dt_c:
                                          type: string
                                        dt_m:
                                          type: string
                                        id:
                                          type: string
                                        id_unite_travail:
                                          type: string
                                        nom_etape_cl:
                                          type: integer
                                        description:
                                          type: string
                                        operateur:
                                          type: string
                                        date_debut:
                                          type: string
                                        date_fin:
                                          type: string
                                        statut_etape_cl:
                                          type: integer
                      feature_type:
                        type: array
                        items:
                          title: ProdTracking-Featuretype
                          type: object
                          properties:
                            etampe:
                              type: string
                            dt_c:
                              type: string
                            dt_m:
                              type: string
                            id:
                              type: string
                            local_name:
                              type: string
                            spatial_repres_type_pna:
                              type: integer
      operationId: get-prod-tracking-lot-id
      description: Retrieve a record from Lot table. By using the parameter full_relation=False you can retreive only the Lot record or by using full_relation=True you can retreive the Lot and all its dependencies (related table records).
      parameters:
        - schema:
            type: boolean
            enum:
              - 'True'
              - 'False'
            default: 'False'
          in: query
          name: full_relation
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
    delete:
      summary: ''
      operationId: delete-prod-tracking-lot-id
      responses:
        '204':
          description: No Content
      description: Delete a record in Lot table.
      tags:
        - prod-tracking
    put:
      summary: ''
      operationId: put-prod-tracking-lot-id
      responses:
        '202':
          description: Accepted
      description: Update a record in Lot table.
      requestBody:
        content:
          application/json:
            schema:
              title: ProdTracking-Lot-NoRel
              type: object
              properties:
                etampe:
                  type: string
                dt_c:
                  type: string
                dt_m:
                  type: string
                id:
                  type: string
                operateur:
                  type: string
                date_debut:
                  type: string
                date_fin:
                  type: string
                theme_cl:
                  type: integer
                type_travail_cl:
                  type: integer
                statut_lot_cl:
                  type: integer
        description: Only not null attributes in the JSON body will get updated. The id must not be empty.
      tags:
        - prod-tracking
  /prod-tracking/lot:
    post:
      summary: ''
      operationId: post-prod-tracking-lot
      responses:
        '201':
          description: Created
      description: Insert a record in Lot table.
      requestBody:
        content:
          application/json:
            schema:
              title: ProdTracking-Lot-NoRel
              type: object
              properties:
                etampe:
                  type: string
                dt_c:
                  type: string
                dt_m:
                  type: string
                id:
                  type: string
                operateur:
                  type: string
                date_debut:
                  type: string
                date_fin:
                  type: string
                theme_cl:
                  type: integer
                type_travail_cl:
                  type: integer
                statut_lot_cl:
                  type: integer
      tags:
        - prod-tracking
  '/prod-tracking/step-wa/{id}':
    get:
      summary: Your GET endpoint
      tags:
        - prod-tracking
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                title: ProdTracking-EtapeUT
                type: object
                properties:
                  etampe:
                    type: string
                  dt_c:
                    type: string
                  dt_m:
                    type: string
                  id:
                    type: string
                  id_unite_travail:
                    type: string
                  nom_etape_cl:
                    type: integer
                  description:
                    type: string
                  operateur:
                    type: string
                  date_debut:
                    type: string
                  date_fin:
                    type: string
                  statut_etape_cl:
                    type: integer
      operationId: get-prod-tracking-step-wa-id
      description: Retrieve a record from etape_ut table.
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
    delete:
      summary: ''
      operationId: delete-prod-tracking-step-wa-id
      responses:
        '204':
          description: No Content
      description: Delete a record in etape_ut table.
      tags:
        - prod-tracking
    put:
      summary: ''
      operationId: put-prod-tracking-step-wa-id
      responses:
        '202':
          description: Accepted
      description: Update a record in etape_ut table.
      requestBody:
        content:
          application/json:
            schema:
              title: ProdTracking-EtapeUT
              type: object
              properties:
                etampe:
                  type: string
                dt_c:
                  type: string
                dt_m:
                  type: string
                id:
                  type: string
                id_unite_travail:
                  type: string
                nom_etape_cl:
                  type: integer
                description:
                  type: string
                operateur:
                  type: string
                date_debut:
                  type: string
                date_fin:
                  type: string
                statut_etape_cl:
                  type: integer
        description: Only not null attributes in the JSON body will get updated. The id must not be empty.
      tags:
        - prod-tracking
  /prod-tracking/step-wa:
    post:
      summary: ''
      operationId: post-prod-tracking-step-wa
      responses:
        '201':
          description: Created
      description: Insert a new record in etape_ut table.
      requestBody:
        content:
          application/json:
            schema:
              title: ProdTracking-EtapeUT
              type: object
              properties:
                etampe:
                  type: string
                dt_c:
                  type: string
                dt_m:
                  type: string
                id:
                  type: string
                id_unite_travail:
                  type: string
                nom_etape_cl:
                  type: integer
                description:
                  type: string
                operateur:
                  type: string
                date_debut:
                  type: string
                date_fin:
                  type: string
                statut_etape_cl:
                  type: integer
      tags:
        - prod-tracking
  /geosys/livrer-zt:
    post:
      summary: ''
      operationId: post-geosys-livrer-zt
      responses:
        '201':
          description: Created
      description: Data delivery endpoint.
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                env:
                  type: string
                theme:
                  type: string
                id_map:
                  type: string
                fichier_meta:
                  type: string
                  format: binary
                fichier_data:
                  type: string
                  format: binary
                logfile:
                  type: string
              required:
                - env
                - theme
                - id_map
                - fichier_meta
                - fichier_data
                - logfile
        description: ''
      tags:
        - geosys
  /geosys/planifier-zt:
    post:
      summary: ''
      operationId: post-geosys-planifier-zt
      responses:
        '201':
          description: Created
      description: Planifier_ZT endpoint.
      tags:
        - geosys
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                env:
                  type: string
                theme:
                  type: string
                id_map:
                  type: string
                type_travail:
                  type: string
                date_fin_prevue:
                  type: string
                logfile:
                  type: string
                liste_classes:
                  type: array
                  items:
                    type: string
                geom:
                  type: string
              required:
                - env
                - theme
                - id_map
                - type_travail
                - date_fin_prevue
                - logfile
                - liste_classes
                - geom
  /geosys/extraire-zt:
    post:
      summary: ''
      operationId: post-geosys-extraire-zt
      responses:
        '200':
          description: OK
      description: Extraire ZT endpoint.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                env:
                  type: string
                theme:
                  type: string
                id_map:
                  type: string
                logfile:
                  type: string
      tags:
        - geosys
  /geosys/creer-md:
    post:
      summary: ''
      operationId: post-geosys-creer-md
      responses:
        '200':
          description: OK
      description: CreerMD endpoint.
      tags:
        - geosys
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                env:
                  type: string
                theme:
                  type: string
                id_map:
                  type: string
                nom_catalogue:
                  type: string
                prod_desc:
                  type: string
                desciption_projet:
                  type: string
                logfile:
                  type: string
                liste_id_source:
                  type: array
                  maxItems: 8
                  minItems: 0
                  items:
                    type: string
                liste_id_precision:
                  type: array
                  maxItems: 3
                  minItems: 0
                  items:
                    type: string
                liste_id_contraintes_legales:
                  type: array
                  maxItems: 3
                  minItems: 0
                  items:
                    type: string
              required:
                - env
                - theme
                - id_map
                - nom_catalogue
                - prod_desc
  /geosys/valider-md:
    post:
      summary: ''
      operationId: post-geosys-valider-md
      responses:
        '200':
          description: OK
      description: ValiderMD endpoint.
      tags:
        - geosys
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                env:
                  type: string
                theme:
                  type: string
                id_map:
                  type: string
                fichier_json:
                  type: string
                  format: binary
                logfile:
                  type: string
              required:
                - env
                - theme
                - id_map
                - fichier_json
  /geosys/nettoyer:
    post:
      summary: ''
      operationId: post-geosys-nettoyer
      responses:
        '204':
          description: No Content
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                env:
                  type: string
                theme:
                  type: string
                id_map:
                  type: string
                logfile:
                  type: string
        description: ''
      tags:
        - geosys
  /geosys/annuler:
    post:
      summary: ''
      operationId: post-geosys-annuler
      responses:
        '204':
          description: No Content
      description: Annuler endpoint
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                env:
                  type: string
                  example: PRO
                theme:
                  type: string
                  example: CORINT_50K
                id_map:
                  type: string
                  example: "'CORINT_50K_20180308_ZVL_LOT'"
                etape:
                  type: string
                  enum:
                    - ExtraireZT
                    - LivrerZT
                logfile:
                  type: string
                  example: corint_50k_annuler.log
              required:
                - env
                - theme
                - id_map
                - etape
      tags:
        - geosys
components:
  schemas:
    ReturnValue-BasicErrorMessage:
      title: ReturnValue-BasicErrorMessage
      type: object
      properties:
        code:
          type: string
        message:
          type: string
    ReturnValue-BasicMessage:
      title: ReturnValue-BasicMessage
      type: object
      properties:
        value:
          type: string
      required:
        - value
    ProdTracking-UniteTravail2-NoRel:
      title: ProdTracking-UniteTravail2-NoRel
      type: object
      properties:
        etampe:
          type: string
        dt_c:
          type: string
        dt_m:
          type: string
        id:
          type: string
        id_lot:
          type: string
        date_prevue_fin:
          type: string
        date_debut_fin:
          type: string
        where_clause:
          type: string
        geom:
          type: string
    ProdTracking-Lot-NoRel:
      title: ProdTracking-Lot-NoRel
      type: object
      properties:
        etampe:
          type: string
        dt_c:
          type: string
        dt_m:
          type: string
        id:
          type: string
        operateur:
          type: string
        date_debut:
          type: string
        date_fin:
          type: string
        theme_cl:
          type: integer
        type_travail_cl:
          type: integer
        statut_lot_cl:
          type: integer
    ProdTracking-Featuretype:
      title: ProdTracking-Featuretype
      type: object
      properties:
        etampe:
          type: string
        dt_c:
          type: string
        dt_m:
          type: string
        id:
          type: string
        local_name:
          type: string
        spatial_repres_type_pna:
          type: integer
    ProdTracking-Code:
      title: ProdTracking-Code
      type: object
      properties:
        id:
          type: integer
        id_liste_code:
          type: integer
        nom:
          type: string
        desc_en:
          type: string
        desc_fr:
          type: string
    ProdTracking-CodeList:
      title: ProdTracking-CodeList
      type: object
      properties:
        id:
          type: integer
        nom:
          type: string
        desc_en:
          type: string
        desc_fr:
          type: string
    ProdTracking-EtapeUT:
      title: ProdTracking-EtapeUT
      type: object
      properties:
        etampe:
          type: string
        dt_c:
          type: string
        dt_m:
          type: string
        id:
          type: string
        id_unite_travail:
          type: string
        nom_etape_cl:
          type: integer
        description:
          type: string
        operateur:
          type: string
        date_debut:
          type: string
        date_fin:
          type: string
        statut_etape_cl:
          type: integer
    ProdTracking-Executant:
      title: ProdTracking-Executant
      type: object
      properties:
        etampe:
          type: string
        dt_c:
          type: string
        dt_m:
          type: string
        id:
          type: string
        id_contractant:
          type: string
        no_contrat:
          type: string
        prix_contrat:
          type: number
    ProdTracking-SousUniteTravail-NoRel:
      title: ProdTracking-SousUnitetravail-NoRel
      type: object
      properties:
        etampe:
          type: string
        dt_c:
          type: string
        dt_m:
          type: string
        id:
          type: string
        id_unite_travail:
          type: string
        date_prevue_fin:
          type: string
        date_debut:
          type: string
        date_fin:
          type: string
    ProdTracking-SousUniteTravail-FullRel:
      title: ProdTracking-SousUniteTravail-FullRel
      type: object
      properties:
        sous_unite_travail:
          title: ProdTracking-SousUnitetravail-NoRel
          type: object
          properties:
            etampe:
              type: string
            dt_c:
              type: string
            dt_m:
              type: string
            id:
              type: string
            id_unite_travail:
              type: string
            date_prevue_fin:
              type: string
            date_debut:
              type: string
            date_fin:
              type: string
        etape_sut:
          type: array
          items:
            title: ProdTracking-EtapeUT
            type: object
            properties:
              etampe:
                type: string
              dt_c:
                type: string
              dt_m:
                type: string
              id:
                type: string
              id_unite_travail:
                type: string
              nom_etape_cl:
                type: integer
              description:
                type: string
              operateur:
                type: string
              date_debut:
                type: string
              date_fin:
                type: string
              statut_etape_cl:
                type: integer
    ProdTracking-UniteTravail2-FullRel:
      title: ProdTracking-Unitetravail2-FullRel
      type: object
      properties:
        unite_travail_2:
          title: ProdTracking-UniteTravail2-NoRel
          type: object
          properties:
            etampe:
              type: string
            dt_c:
              type: string
            dt_m:
              type: string
            id:
              type: string
            id_lot:
              type: string
            date_prevue_fin:
              type: string
            date_debut_fin:
              type: string
            where_clause:
              type: string
            geom:
              type: string
        etape_ut:
          type: array
          items:
            title: ProdTracking-EtapeUT
            type: object
            properties:
              etampe:
                type: string
              dt_c:
                type: string
              dt_m:
                type: string
              id:
                type: string
              id_unite_travail:
                type: string
              nom_etape_cl:
                type: integer
              description:
                type: string
              operateur:
                type: string
              date_debut:
                type: string
              date_fin:
                type: string
              statut_etape_cl:
                type: integer
        sous_unite_travail:
          type: array
          items:
            title: ProdTracking-SousUniteTravail-FullRel
            type: object
            properties:
              sous_unite_travail:
                title: ProdTracking-SousUnitetravail-NoRel
                type: object
                properties:
                  etampe:
                    type: string
                  dt_c:
                    type: string
                  dt_m:
                    type: string
                  id:
                    type: string
                  id_unite_travail:
                    type: string
                  date_prevue_fin:
                    type: string
                  date_debut:
                    type: string
                  date_fin:
                    type: string
              etape_sut:
                type: array
                items:
                  title: ProdTracking-EtapeUT
                  type: object
                  properties:
                    etampe:
                      type: string
                    dt_c:
                      type: string
                    dt_m:
                      type: string
                    id:
                      type: string
                    id_unite_travail:
                      type: string
                    nom_etape_cl:
                      type: integer
                    description:
                      type: string
                    operateur:
                      type: string
                    date_debut:
                      type: string
                    date_fin:
                      type: string
                    statut_etape_cl:
                      type: integer
    ProdTracking-Lot-FullRel:
      title: ProdTracking-Lot-FullRel
      type: object
      properties:
        lot:
          title: ProdTracking-Lot-NoRel
          type: object
          properties:
            etampe:
              type: string
            dt_c:
              type: string
            dt_m:
              type: string
            id:
              type: string
            operateur:
              type: string
            date_debut:
              type: string
            date_fin:
              type: string
            theme_cl:
              type: integer
            type_travail_cl:
              type: integer
            statut_lot_cl:
              type: integer
        executant:
          title: ProdTracking-Executant
          type: object
          properties:
            etampe:
              type: string
            dt_c:
              type: string
            dt_m:
              type: string
            id:
              type: string
            id_contractant:
              type: string
            no_contrat:
              type: string
            prix_contrat:
              type: number
        unite_travail_2:
          type: array
          items:
            title: ProdTracking-Unitetravail2-FullRel
            type: object
            properties:
              unite_travail_2:
                title: ProdTracking-UniteTravail2-NoRel
                type: object
                properties:
                  etampe:
                    type: string
                  dt_c:
                    type: string
                  dt_m:
                    type: string
                  id:
                    type: string
                  id_lot:
                    type: string
                  date_prevue_fin:
                    type: string
                  date_debut_fin:
                    type: string
                  where_clause:
                    type: string
                  geom:
                    type: string
              etape_ut:
                type: array
                items:
                  title: ProdTracking-EtapeUT
                  type: object
                  properties:
                    etampe:
                      type: string
                    dt_c:
                      type: string
                    dt_m:
                      type: string
                    id:
                      type: string
                    id_unite_travail:
                      type: string
                    nom_etape_cl:
                      type: integer
                    description:
                      type: string
                    operateur:
                      type: string
                    date_debut:
                      type: string
                    date_fin:
                      type: string
                    statut_etape_cl:
                      type: integer
              sous_unite_travail:
                type: array
                items:
                  title: ProdTracking-SousUniteTravail-FullRel
                  type: object
                  properties:
                    sous_unite_travail:
                      title: ProdTracking-SousUnitetravail-NoRel
                      type: object
                      properties:
                        etampe:
                          type: string
                        dt_c:
                          type: string
                        dt_m:
                          type: string
                        id:
                          type: string
                        id_unite_travail:
                          type: string
                        date_prevue_fin:
                          type: string
                        date_debut:
                          type: string
                        date_fin:
                          type: string
                    etape_sut:
                      type: array
                      items:
                        title: ProdTracking-EtapeUT
                        type: object
                        properties:
                          etampe:
                            type: string
                          dt_c:
                            type: string
                          dt_m:
                            type: string
                          id:
                            type: string
                          id_unite_travail:
                            type: string
                          nom_etape_cl:
                            type: integer
                          description:
                            type: string
                          operateur:
                            type: string
                          date_debut:
                            type: string
                          date_fin:
                            type: string
                          statut_etape_cl:
                            type: integer
        feature_type:
          type: array
          items:
            title: ProdTracking-Featuretype
            type: object
            properties:
              etampe:
                type: string
              dt_c:
                type: string
              dt_m:
                type: string
              id:
                type: string
              local_name:
                type: string
              spatial_repres_type_pna:
                type: integer
  securitySchemes:
    geosys_auth:
      flows:
        implicit:
          authorizationUrl: 'http://geosys/api/oauth/dialog'
          scopes:
            'write:geosys': modify spatial data in geosys DB
            'read:geosys': read spatial data in geosys DB
      type: oauth2